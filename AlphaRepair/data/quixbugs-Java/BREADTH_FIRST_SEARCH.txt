- while (true) {
+ while  (queue.size() > 0) {